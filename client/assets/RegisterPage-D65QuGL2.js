import{r as q,j as e}from"./index-C6yf6C18.js";import{z as a,u as E,t as F,r as P}from"./auth.service-DQORs1I6.js";const Z=/^[a-zA-Z0-9_.]+@[a-z0-9]+\.[a-z]+$/,$=/^(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[^\w\s:])(\S){8,16}$/,Y=a.object({email:a.string().regex(Z,"Invalid email format").min(1,"Email is required"),password:a.string().regex($,"Password must be at least 8-16 characters long and contain one uppercase letter, one digit").min(1,"Password is required"),profile:a.object({name:a.string().min(1,"Name is required").regex(/^[A-Z][a-z]{1,15}$/,"Name can only contain letters"),surname:a.string().min(1,"Surname is required").regex(/^[A-Z][a-z]{1,15}$/,"Surname can only contain letters"),age:a.coerce.number().min(1,"Age must be at least 1").max(100,"Age must be at most 100")})}),k=()=>{var t,n,l,m,o,c,d,u,p;const[h,i]=q.useState(0),{handleSubmit:g,register:r,formState:{errors:s,isValid:j},reset:w}=E({mode:"all",resolver:F(Y)}),b=async v=>{const{email:y,password:N,user:S}=v,{name:f,surname:R,image:z}=S,A={email:y,password:N,user:{name:f,surname:R,image:z}};try{(await P(A)).status===201&&i(2),w()}catch(x){console.log(x),i(1)}};return e.jsx("div",{children:h!==2?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Sing up"}),e.jsxs("form",{onSubmit:g(b),children:[e.jsxs("div",{className:"wrap-input",children:[e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"example@mail.com",...r("email")})}),e.jsx("p",{className:s.email?"view":"hide",children:s.email?s.email.message:""})]}),e.jsxs("div",{className:"wrap-input",children:[e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Enter your password",...r("password")})}),e.jsx("p",{className:s.password?"view":"hide",children:s.password?s.password.message:""})]}),e.jsxs("div",{className:"wrap-input",children:[e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Your name",...r("user.name")})}),e.jsx("p",{className:(t=s.user)!=null&&t.name?"view":"hide",children:(n=s.user)!=null&&n.name?(l=s.user)==null?void 0:l.name.message:""})]}),e.jsxs("div",{className:"wrap-input",children:[e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Your surname",...r("user.surname")})}),e.jsx("p",{className:(m=s.user)!=null&&m.surname?"view":"hide",children:(o=s.user)!=null&&o.surname?(c=s.user)==null?void 0:c.surname.message:""})]}),e.jsxs("div",{className:"wrap-input",children:[e.jsx("label",{children:e.jsx("input",{type:"file",placeholder:"Put your photo",...r("user.image")})}),e.jsx("p",{className:(d=s.user)!=null&&d.image?"view":"hide",children:(u=s.user)!=null&&u.image?(p=s.user)==null?void 0:p.image.message:""})]}),e.jsx("button",{disabled:!j,children:"Register"})]})]}):e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Check your email to continue"})})})},H=()=>e.jsx("div",{children:e.jsx(k,{})});export{H as default};
